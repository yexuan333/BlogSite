+++
title = 'CPP函数'
date = 2023-12-31T23:55:23+08:00
draft = false
+++
##### 定义函数
```cpp
// 无返回值函数
void print(std::string text){
    std::cout << text << std::endl;
}
// 有返回值函数
int add(int a, int b){
    return a + b;
}
```
##### 函数原型
###### 什么是原型
函数原型是一条语句，以`;`结束，如:
```cpp
void add(int a,int b);
```
###### 为什么需要原型
C++的底层编译为了与C兼容，继承了C语言编译的大部分特点，采用类似**单遍编译**的做法，编译器按顺序处理源代码文件。当编译器遇到一个函数调用时，它必须已经知道这个函数的签名（即函数原型），否则会产生编译错误。这就是为什么 C++ 需要在调用函数之前声明函数原型的原因。
##### 函数参数与按值传递
###### 按值传递
声明了一个add函数，在内部加一，当调用add函数时
```cpp
int add(int aa) {
    aa += 1;
    return aa;
}

int main() {
    int a = 0;
    int b = add(a);
    // 在这个位置，a = 0, b = 1
    return 0;
}
```
###### 变量遮蔽
如果在函数外有一个变量 x，然后在函数内部重新声明了一个同名的变量 x，这种行为称为“变量遮蔽”或“局部遮蔽”
```cpp
int x = 10; // 全局变量

void myFunction() {
    int x = 20; // 局部变量，遮蔽了全局变量 x
    // 在这个作用域内，x 指的是局部变量，会在退出函数的时候释放这个变量
}

int main() {
    myFunction();
    // 在这个位置，x 指的是全局变量
    return 0;
}
```